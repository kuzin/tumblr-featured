/*
 *  Tumblr Featured Posts - v0.7.1
 *  Quick featured posts plugin for tumblr.
 *  http://kuzn.dev
 *
 *  Made by Mike Kuzin
 *  Under MIT License
 */
!function(a){function b(b,e){this.element=b,this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.getData()}var c="featuredPosts",d={postNum:4,tagName:"featured",apiURL:"",apiKey:""};b.prototype={_posts:[],getData:function(){var b,c=this;b="//api.tumblr.com/v2/blog/"+c.settings.apiURL+"/posts?api_key="+c.settings.apiKey+"&tag="+c.settings.tagName+"&callback=?",a.getJSON(b,function(a){for(i=0;i<a.response.posts.length&&(c._posts.push(a.response.posts[i]),i!==c.settings.postNum-1);i++);c.build()})},build:function(){var b,c;for(b="",c=this._posts,i=0;i<c.length;i++){var d="",e=c[i].type;switch(d+='<li class="featured-'+e+'">',d+="link"!==e?'<a href="'+c[i].post_url+'">':'<a href="'+c[i].url+'">',e){case"photo":if(c[i].photos.length>1){for(d+='<ul class="featured-'+e+'-set">',j=0;j<c[i].photos.length;j++)d+='<li class="featured-'+e+'-set-photo"><img src="'+c[i].photos[j].original_size.url+'" /></li>';d+="</ul>"}else d+='<img src="'+c[i].photos[0].original_size.url+'" />';d+='<div class="featured-'+e+'-caption">'+c[i].caption+"</div>";break;case"quote":d+='<div class="featured-'+e+'-text">'+c[i].text+"</div>",d+='<div class="featured-'+e+'-source">'+c[i].source+"</div>";break;case"link":d+='<div class="featured-'+e+'-title">'+c[i].title+"</div>",d+='<div class="featured-'+e+'-description">'+c[i].description+"</div>";break;case"chat":for(d+='<div class="featured-'+e+'-dialogue">',j=0;j<c[i].dialogue.length;j++)d+="<p>",d+="<strong>"+c[i].dialogue[j].name+"</strong>",d+="<span>"+c[i].dialogue[j].phrase+"</span>",d+="</p>";d+="</div>";break;case"audio":d+=c[i].embed,d+='<div class="featured-'+e+'-caption">'+c[i].caption+"</div>";break;case"video":d+=c[i].player[2].embed_code,d+='<div class="featured-'+e+'-caption">'+c[i].caption+"</div>";break;default:d+='<div class="featured-'+e+'-title">'+c[i].title+'</div><div class="featured-'+e+'-body">'+c[i].body+"</div>"}d+="</a>",d+="</li>",b+=d}a(this.element).prepend(a("<ul/>").addClass("featured-list").append(b))}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))}),this}}(jQuery,window,document);